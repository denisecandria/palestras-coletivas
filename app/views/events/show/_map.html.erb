<% if Rails.env != 'test' %>
  <% if @event.coordinates %>
    <script type="text/javascript" async defer src="https://maps.googleapis.com/maps/api/js?key= AIzaSyBrZhS-sHq2hso5tvYM0Yj1RZi4WJCN574&callback=initMap"></script>
    <script type="text/javascript">
      ;(function(w, d, g, u) {
        var marker, position, config, map, gMaps = g.maps;

        position = new gMaps.LatLng(<%= @event.coordinates[1] %>, <%= @event.coordinates[0] %>),

        config = {
          center: position,
          mapTypeControl: false,
          mapTypeId: gMaps.MapTypeId.ROADMAP,
          scrollwheel: false,
          zoom: 16
        };

        map = new gMaps.Map(d.getElementById("location-map"), config);

        marker = new gMaps.Marker({
          animation: gMaps.Animation.BOUNCE,
          map: map,
          position: position
        });

      }(window, document, google, undefined));
    </script>
  <% end %>
<% end %>
